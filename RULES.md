# Battle System Rules

本ドキュメントは、本ゲームにおける戦闘ルール・数値仕様・設計意図をまとめたものです。

---

## 基本構成

- 1パーティは **4人編成**
  - ATTACKER
  - HEALER
  - SUPPORTER
  - TANK
- 戦闘は **ターン制**
- 各ターンで生存キャラクターが行動します
- 行動順は SPD を基準に決定されます
- 全滅した側が敗北となります

---

## 行動種別

### 通常攻撃
- 単体にダメージを与える基本行動
- ダメージは ATK・乱数・倍率によって決定されます

### サポート攻撃（SUPPORTER）
- 小ダメージを与える代わりに **ATKデバフ**を付与
- サポーターの主な役割は「ダメージ補助＋弱体化」です

### 回復（HEALER）
- 味方単体の HP を回復
- 回復量も乱数によって変動します

### 防御（TANK）
- 次に受けるダメージを軽減します（例：×0.6）
- 防御状態はターン終了時に解除されます

---

## AOE（全体攻撃）スキル

### WHIRLWIND
- ATTACKERのみ使用可能な全体攻撃
- 敵全体にダメージを与えます
- **クールタイム（CT）あり**

#### クールタイム仕様
- 使用後、一定ターン再使用不可
- CT が 0 のときのみ使用可能
- 強力だが連発できないため、戦闘の山場を作ります

---

## デバフ仕様（重要）

### ATKデバフ
- サポーター攻撃などで付与されます
- 効果量は **ATK −2**

#### 持続ルール
- ATKデバフは  
**デバフを受けたキャラクターが行う「次の攻撃1回のみ有効」**

- 攻撃が行われた時点で自動的に解除されます
- ターン経過だけでは解除されません

この仕様により：
- サポーターの行動が即座に意味を持つ
- 行動順・ターゲット選択が重要になります

---

## フェーズ制（後半加速システム）

戦闘が長引きすぎないよう、  
一定ターン以降（内部条件によって判定）からダメージ倍率が上昇します。


| フェーズ | ダメージ倍率 |
|---|---|
| 通常フェーズ | ×1.0 |
| 後半フェーズ | ×1.2 |

### 設計意図
- 戦闘の長期化を防ぐ
- 終盤に一気に決着がつく展開を作る
- 「最後まで油断できない」緊張感を演出する

---

## 乱数（seed）について

本ゲームでは、乱数の再現性を確保するため **seed** を使用しています。

### seed の性質
- 同じ seed → 毎回同じ試合展開
- 異なる seed → ターン数・勝敗・展開が変化

### デフォルト設定
```python
seed = 1
```
## seed1にしてある理由
- seed によってターン数は前後します
- ランダム性とテンポのバランスが良い
- 動作確認・デバッグ・デモ用途に適しています

※ seed を変更することで、
より短期決戦／長期戦の傾向を試すことができます。

## ターン数について
- 平均ターン数：8〜12ターン
- seed や乱数によって前後します
- フェーズ制により、無限に長引くことはありません
